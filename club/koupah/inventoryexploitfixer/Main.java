package club.koupah.inventoryexploitfixer;

import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.entity.Player;
import org.bukkit.plugin.Plugin;
import org.bukkit.plugin.java.JavaPlugin;




public class Main extends JavaPlugin {

	
	//How many times to allow them to update head rotation before their inventory is closed (2 is good as typically 1 false gets through)
	static int threshold = 1;
	
	//Currently invalid as no way to check if user closed inventory
	/**
	//Message the player when they attempt to exploit?
	static boolean messagePlayers = true;
	
	//Message to send if above is true
	static String message = ChatColor.RED + "Stop attempting to perform inventory exploits!";
	**/
	
	static Plugin plugin;

	public void onEnable() {
		plugin = this;

		//Incase of reload and players are already connected
		for (Player p : Bukkit.getOnlinePlayers()) {
			p.closeInventory();
			EListener.inInventory.put(p.getUniqueId(),false);
			EListener.times.put(p.getUniqueId(),0);
		}
		
		//Setup event listener
		getServer().getPluginManager().registerEvents(new EListener(), this);

		//Output message into console confirming activation
		getServer().getConsoleSender().sendMessage(ChatColor.AQUA + "IEF by Koupah has been " + ChatColor.GREEN + "enabled" + ChatColor.AQUA+"!");
       
	}
	
	public void onDisable() {
		
		//Output message into console confirming deactivation
		getServer().getConsoleSender().sendMessage(ChatColor.AQUA + "IEF by Koupah has been " + ChatColor.RED + "disabled" + ChatColor.AQUA+"!");
	}
	
}
